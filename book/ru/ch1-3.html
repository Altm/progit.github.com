---
layout: translation
title: Pro Git 1.3 Введение Основы Git
---
<h2 id='_git'>Основы Git</h2>

<p>Так что ж такое Git в двух словах? Эту часть важно усвоить, поскольку если вы поймете, что есть Git, и основы того, как он работает, вам будет гораздо проще пользоваться им эффективно. Когда вы изучаете Git, постарайтесь освободиться от всего, что вы знали о других VCS, таких как Subversion или Perforce. Это позволит вам избежать коварных ловушек при использовании Git. Git хранит и работает с информацией иначе, чем другие системы, даже когда пользовательский интерфейс очень похож. Понимание этих различий поможет вам не запутаться при его использовании.</p>

<h3 id='snapshots_not_differences'>Snapshots, Not Differences</h3>

<p>Главное из отличей Git от других VCS (например Subversion) заключается в способе работы с данными. Концептуально большинство других систем хранит информацию как список изменений по файлам. Эти системы (CVS, Subversion, Perforce, Bazaar и другие) относятся к хранимым данным как к набору файлов и изменениям в каждом из них во времени, как показано на рисунке 1-4.</p>

<p><center><img src="/figures/ch1/18333fig0104-tn.png"></center><br/> Рисунок 1-4. Другие системы хранят данные как изменения к базовой версии для каждого файла.</p>

<p>Git хранит данные другим способом. Вместо этого Git считает хранимые данные набором слепков мини файловой системы. Каждый раз когда вы делаете коммит (фиксацию? =), т.е. сохраняете текущую версию проекта в Git, он по сути сохраняет как выгядят все файлы вашего проекта на текущий момент и сохраняет в виде слепка. В целях сохранения эффективности, если файлы не менялись Git сохраняет не сам файл, а ссылку на ранее сохраненный файл. Подход Git к хранению данных приблизительно показан на рисунке 1-5.</p>

<p><center><img src="/figures/ch1/18333fig0105-tn.png"></center><br/> Рисунок 1-5. Git хранит данные как слепки состояний проекта во времени.</p>

<p>Это важное отличие Git от практически всех других систем контроля версий. Это наполняет новым смыслом практически все аспекиы версионного контроля, которые другие системы взяли от своих предшествениц. Это делает Git больше похожим на небольшую файловую систему, с невероятно мощными инструментами работающими поверх нее, чем на просто VCS. Мы рассмотрим некоторые преимущества, которые вы получаете, думая о хранении данных, когда коснемся работы с ветвями в Git в главе 3.</p>

<h3 id='__'>Использование локальных операций</h3>

<p>Для совершения большинства операций в Git необходимы только локальные файлы и ресурсы, т.е. обычно информация с других компьютеров в сети не нужна. Если вы пользовались централизованными системами, где практически на каждую операцию накладывается сетевая задержка, этот аспект работы Git заставит вас подумать, что боги скорости наделили Git неземной силой. Поскольку вся история проекта хранится локально у вас на диске, большинство операций выглядит практически мгновенными.</p>

<p>К примеру, чтобы просматривать историю проекта Git, не нужно предварительно скачивать эти данные с сервера, достаточно просто прочитать её непосредственно из вашего локального репозитория. Это позовляет просматривать историю практически моментально. Если вам нужно просмотреть изменения между текущей версией файла и версией, сделаной месяц назад, Git может прочитать файл месячной давности и вычислить разницу локально, вместо того чтоб посылать запрос на получение разницы на удаленный сервер или стягивать старую версию файла с сервера и делать локальное сравнение.</p>

<p>Также это означает, что только небольшую часть операций вы не можете сделать без доступа к сети или VPN. Когда вы летите в самолете или путешествуете поездом и хотите немного поработать, вы можете сохранять новые версии и отгрузить их, когда сетевое соединение будет доступно. Придя домой и не сумев подключить ваш VPN кленет, вы можете продолжать работать. Во многих других системах это невозможно, или же крайне неудобно. Используя Perforce, к примеру, вы не сможете сделать многого без соединения с сервером. Работая с Subversion и CVS вы можете редактироваться файлы, но вы не можете сохранить изменения в базе (потому что база отключена). Возможно сейчас это не выглядит существенным, но потом вы удивитесь, увидев, на сколько это бывает важным.</p>

<h3 id='git____'>Git следит за целостностью данных</h3>

<p>Перед сохранением любых данных Git вычисляет контрольные суммы, которые в дальнейшем используются в качестве ключа для доступа к данным. Из этого следует, что невозможно изменить содержимое файла или каталога так, чтобы Git об этом не знал. Эта функциональность имплементирована на самых нижних уровнях Git и является важной составляющей его философии. Вы не потеряете информацию при передаче данных или в случае повреждения файлов, поскольку Git всегда может это определить.</p>

<p>Механизм используемый Git для вычисления контрольных сумм называется хэш SHA-1. Результатом вычисления контрольной суммы является 40-символьная строка, содержащия шестнадцатеричные цифры (0-9 и a-f). Она вычисляется на основе содержимого файла или каталога, хранимого Git. SHA-1 хэш выглядить примерно так:</p>

<pre><code>24b9da6552252987aa493b52f8696cd6d3b00373</code></pre>

<p>Работая с Git, вы будете постоянно встречать эти хэши, поскольку они очень активно используются. Фактически Git сохраняет данные не по имени файла, а обращается к файлам в своей базе, адресуя их по хэшам их содержимого.</p>

<h3 id='git____'>Git практически всегда добавляет данные</h3>

<p>Практически все действия, которые вы совершаете в Git, только добавляют данные в базу данных. Поэтому очень сложно заставить систему сделать что-то неотменяемое или приводящее к удалению данных. Конечно, как и в любой другой системе контроля версий, вы можете потерять изменения, которые еще не были сохранены в Git, но после того, как вы сделали коммит (фиксацию? =))), очень сложно их потерять, особенно если вы регулярно отправляете вашу базу в другой репозиторий.</p>

<p>Это делает использование Git похожим на игру, поскольку вы можете эксперементировать, не боясь серьезно что-то поломать. Если вы хотите более детально изучить, как Git хранит данные и как вы можете восстановить их, когда вдруг кажется, что они потерялись, ознакомьтесь с разделом &#8220;Under the Covers&#8221; в главе 9.</p>

<h3 id='_'>Три состояния</h3>

<p>Теперь, внимание. Это одна из главных вещей которую вы должны запомнить о Git, если вы хотить чтобы дальнейшее изучение прошло гладко. В Git файлы могут находиться в одном из трех состояний: зафиксированные,измененные и подготовленные. Если файл зафиксирован, это означает, что он уже сохранен в вашей локальной базе. К измененным относятся файлы, которые поменялись, но еще не были зафиксированны. Подготовленные файлы – это файлы, которые вы пометили для включения в следующий коммит (фиксацию? =))).</p>

<p>Now, pay attention. This is the main thing to remember about Git if you want the rest of your learning process to go smoothly. Git has three main states that your files can reside in: committed, modified, and staged. Committed means that the data is safely stored in your local database. Modified means that you have changed the file but have not committed it to your database yet. Staged means that you have marked a modified file in its current version to go into your next commit snapshot.</p>

<p>Таким образом, в проекте с использованием Git есть три части: каталог Git (Git directory), рабочий каталог (working directory) и область подготовленых файлов (staging area).</p>

<p>This leads us to the three main sections of a Git project: the Git directory, the working directory, and the staging area.</p>

<p><center><img src="/figures/ch1/18333fig0106-tn.png"></center><br/> Рисунок 1-6. Рабочий каталог, область подготовленых файлов, каталог Git</p>

<p>Каталог Git – это место где Git хранит метаданные и базу данных объектов вашего проекта. Это наиболее важная часть Git, и именно она копируется, когда вы клонируете репозиторий с другого компьютера.</p>

<p>The Git directory is where Git stores the metadata and object database for your project. This is the most important part of Git, and it is what is copied when you clone a repository from another computer.</p>

<p>Рабочая директория — это извлеченная из базы копия определенной версии проекта. Эти файлы, извлеченные из сжатой базы данных в каталоге Git и помещенные на диск для просмотра и модификаций.</p>

<p>The working directory is a single checkout of one version of the project. These files are pulled out of the compressed database in the Git directory and placed on disk for you to use or modify.</p>

<p>Область подготовленных файлов - это файл, обычно хранящийся в вашем каталоге Git, который соодержит информацию о том, что должно войти в следующий коммит. Иногда ее называют индексом (index), но последнее время становится стандартом называть ее областью подготовленых фалов.</p>

<p>The staging area is a simple file, generally contained in your Git directory, that stores information about what will go into your next commit. It’s sometimes referred to as the index, but it’s becoming standard to refer to it as the staging area.</p>

<p>Стандартный рабочий процесс с использованием Git выглядит примерно так:</p>

<p>The basic Git workflow goes something like this:</p>

<p>1. Вы изменяете файлы в вашем рабочем каталоге. 2. Вы подготавливаете файлы, добавляя их слепки в область подготовленых файлов. 3. Вы делаете коммит, при этом слепки файлов, сохраненные в области подготовленных файлов, перемещаются на хранение в каталог Git.</p>

<ol>
<li>You modify files in your working directory.</li>

<li>You stage the files, adding snapshots of them to your staging area.</li>

<li>You do a commit, which takes the files as they are in the staging area and stores that snapshot permanently to your Git directory.</li>
</ol>

<p>Если рабочая версия файла совпадает с версией в каталоге Git, файл считается зафиксированым. Если файл изменен, но добавлен в область подготовленных данных, он подготовлен к коммиту. Если ж файл изменен, но не подготовлен, то он считается модифицированным. В главе 2 вы узнаете больше об этих трех сосотояних и как вы можете, либо получить преимущество, либо пропустить стадию подготовленных файлов.</p>

<p>If a particular version of a file is in the git directory, it’s considered committed. If it’s modified but has been added to the staging area, it is staged. And if it was changed since it was checked out but has not been staged, it is modified. In Chapter 2, you’ll learn more about these states and how you can either take advantage of them or skip the staged part entirely.</p>

<div id='nav'>
<a href='ch1-2.html'>prev</a> | <a href='ch1-4.html'>next</a>
</div>