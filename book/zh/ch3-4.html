---
layout: translation
title: Pro Git 3.4 Git 分支 分支式工作流程
---
<h2 id='id182'>分支式工作流程</h2>

<p>如今你已经有了分支与合并的基础，你可以或者应该用它做点什么？在本节，我们将介绍一些由轻巧的分支带来的常见的工作流程，由此你可以决定是否在你自己的工作循环中使用它们。</p>

<h3 id='longterm'>长期(long-term）分支</h3>

<p>由于Git使用简单的三方合并，长期反复的从一个分支合并到另一个分支通常是很容易的。这意味着你可以拥有多个开放的分支用来进行不同阶段的开发；你可以经常性的把一个合并到另一个里。</p>

<p>许多Git开发者在其工作流程中采用该方法，比如在<code>master</code>分支里只保留完全稳定的代码——唯一已经或将要发布的代码。他们还有一个平行的分支名为develop或者next来进行工作或者进行稳定性测试 —— 它不一定永远稳定，不过一旦进入一个稳定状态，它便可以被合并到<code>master</code>里。其的作用是从已完成的特性分支（短期分支，如前例的<code>iss53</code>分支）里提取(pull)内容，从而确保这些分支的内容通过所有的测试并且不引入更多错误。</p>

<p>实际上，我们讨论的是随着你创造的commit不停前移的指针。稳定分支在你提交的历史里比较落后，而前沿的分支则遥遥领先（见图3-18）。</p>

<p><center><img src="/figures/ch3/18333fig0318-tn.png"></center><br/> 图 3-18. 更稳定的分支通常比较落后。</p>

<p>可能把它们想象成工作流水线比较容易理解，经过测试的commit集合被遴选到更稳定的流水线。</p>

<p><center><img src="/figures/ch3/18333fig0319-tn.png"></center><br/> 图 3-19. 想象成流水线可能会容易点。</p>

<p>你可以用这招维护不同层次的稳定性。一些更大的项目还会有一个<code>proposed(建议)&#39;或</code>pu<code>(proposed updates，建议更新)分支，它包含着那些可能还没有成熟到进入</code>next<code>或</code>master<code>的分支。这样的目的是你拥有了不同层次的稳定性；当这些分支进入到更稳定的水平的时候，你再把它们合并到更高层次中去。
使用多个长期分支不一定是必要的，但通常都会有帮助，尤其是在你应付非常大型或者复杂的工程的时候。</code></p>

<h3 id='topic'>特性(Topic)分支</h3>

<p>特性分支在任何规模的项目中都十分有用。一个特性分支是一个短期的，用来实现单一特性或与其相关工作的分支。这可能是你在以前的版本控制系统里从未做过的事请，因为通常创建和合并分支消耗太大。然而在Git中，一天之内建立，使用，合并再删除多个分支是常见的事。</p>

<p>你在上节<code>iss53</code>和<code>hotfix</code>分支的例子里已经见过了。你向它们进行几次提交然后在合并到主分支以后彻底删除之。该技术允许你迅速和完全的进行语境切换——因为你的工作分散在不同的流水线里，每个分支里的改变都和它的目标特性相关，浏览代码之类的事情因而变得更简单了。你可以把做出的改变保持在其中几分钟，几天或者几个月，等它们成熟以后再合并，而不用在乎他们建立的顺序或者进度。</p>

<p>设想在一个例子中做一点工作（在<code>master</code>里），分出一个问题解决分支（<code>iss91</code>），在该分支里工作一会，分出另一个分支来尝试用不同的方法来解决同一个问题（<code>iss91v2</code>），返回master分支然后在那里再工作一下，再从那里分支尝试一个你不太确定的想法（<code>dumbidea</code>分支）。你的提交历史将变成图 3-20 这样。</p>

<p><center><img src="/figures/ch3/18333fig0320-tn.png"></center><br/> 图 3-20. 拥有多个特性分支的提交历史。</p>

<p>现在，假定你决定第二个解决方案是最好的（<code>iss91v2</code>）；你拿<code>dumbidea</code>分支给你的同事们看了以后发现它竟然是个天才之作。现在需要抛弃原来的<code>iss91</code>分支（失去C5和C6）并把另外两个分支并入。提交历史将变成图3-21这样。</p>

<p><center><img src="/figures/ch3/18333fig0321-tn.png"></center><br/> 图 3-21. 合并了dumbidea和iss91v2以后的历史。</p>

<p>牢记这些分支全部本地分支这一点很重要。当你在使用分支和合并的时候，一切都是在你自己的Git仓库里进行的——完全不涉及与服务器的交流。</p>

<div id='nav'>
<a href='ch3-3.html'>prev</a> | <a href='ch3-5.html'>next</a>
</div>